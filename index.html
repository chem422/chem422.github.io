<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chem Chat 1.7</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- MAIN MENU -->
<div id="mainMenu" class="screen visible">
  <div class="background">
    <div id="earth" class="planet"></div>
    <div id="moon" class="planet"></div>
  </div>

  <div class="menu-box">
    <h1>Chem Chat 1.7</h1>
    <input type="text" id="usernameInput" placeholder="Enter your username" maxlength="20" />
    <input type="text" id="roomInput" placeholder="Enter room code to join" maxlength="5" style="text-transform: uppercase;" />
    <button id="startRoomBtn" onclick="startRoom()">Start New Room</button>
    <button id="joinRoomBtn" onclick="joinRoom()">Join Room</button>
    <button id="openSettingsBtn" onclick="toggleSettingsMenu()">Settings ⚙️</button>
  </div>

  <!-- Main menu Settings -->
  <div id="settingsMenu" class="settings-menu hidden">
    <h2>Settings</h2>
    <label>
      <input type="checkbox" id="musicToggleMain" checked />
      Background Music
    </label><br />
    <label>
      <input type="checkbox" id="notifSoundToggleMain" checked />
      Notification Sound
    </label><br />
    <button onclick="toggleSettingsMenu()">Close</button>
  </div>
</div>

<!-- CHAT AREA -->
<div id="chatArea" class="screen hidden">
  <div class="chat-header">
    <div>
      <button id="backBtn" onclick="leaveRoom()">← Back</button>
      <button id="notRickRollBtn" class="hidden" onclick="window.open('https://www.youtube.com/watch?v=dQw4w9WgXcQ', '_blank')">Not a Rick Roll</button>
    </div>
    <div>
      Room: <span id="currentRoomCode"></span>
      <button id="openChatSettingsBtn" onclick="toggleChatSettingsMenu()">Settings ⚙️</button>
    </div>
  </div>

  <div id="messages" class="chat-messages"></div>

  <textarea id="messageInput" placeholder="Type your message here..." rows="2" maxlength="500"></textarea>
  
  <div class="chat-input-controls">
    <button id="addFileBtn" onclick="openFileUpload()">+ Add</button>
    <button id="sendBtn" onclick="sendMessage()">Send</button>
  </div>

  <!-- Chat Settings Menu -->
  <div id="chatSettingsMenu" class="settings-menu hidden">
    <h2>Chat Settings</h2>
    <label>
      <input type="checkbox" id="musicToggleChat" checked />
      Background Music
    </label><br />
    <label>
      <input type="checkbox" id="notifSoundToggleChat" checked />
      Notification Sound
    </label><br />
    <button onclick="toggleChatSettingsMenu()">Close</button>
  </div>

  <!-- Rickroll flying video container -->
  <div id="rickrollFlyContainer" class="rickroll-fly-container"></div>

  <!-- Pong game canvas -->
  <canvas id="pongCanvas" class="hidden" width="400" height="300"></canvas>
</div>

<!-- FILE UPLOAD OVERLAY -->
<div id="fileUploadOverlay" class="overlay hidden">
  <div class="file-upload-box">
    <h3>Upload a File</h3>
    <p>Drag and drop a .txt file here or click to select</p>
    <input type="file" id="fileInput" accept=".txt" />
    <div class="file-upload-buttons">
      <button onclick="uploadSelectedFile()">Upload</button>
      <button onclick="closeFileUpload()">Cancel</button>
    </div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="script.js"></script>

</body>
</html>
